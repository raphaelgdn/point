#!/usr/bin/env groovy
pipeline {
    agent none
    stages {
        stage('Start VM WORK') {
            agent{
                label'POWER'
            } 
            steps{
                sh '/usr/bin/virsh -c qemu:///system start WORK'
            }
        }        
        stage ('verify the VM is running') {
            agent{
                label 'POWER'
            }
            steps{
                sh '/usr/bin/virsh -c qemu:///system list'
            }
        }
        stage('start time service') {
            agent{
                label 'WORK'
            }
            steps{
                powershell 'net start w32time'
            }
        }
        stage('Update time clock') {
            agent{
                label 'WORK'
            }
            steps{
                powershell 'W32tm /resync /force'
            }
        }
        state('start robot') {
            agent{
                label 'WORK'
            }
            steps{
                powershell 'start C:\Users\work\Downloads\tinytask.exe C:\Users\work\Downloads\treta.rec'
            }
        }
    }
}